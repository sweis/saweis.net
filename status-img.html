<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Current Nicolas Cage Status</title>
  <meta name="description" content=o
  "Current Nicolas Cage Status" />
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body bgcolor="#D3D2D6">
  <script>
  var numImages = 8;
  var range = 100;

  const searchParams = new URLSearchParams(window.location.search);
  let v = parseInt(searchParams.get("v"));
  if (isNaN(v) || v < 0 || v > range) {
    // Generate a random integer within the range of 0-100
    v = Math.floor(Math.random() * range+1);
  }
  var imageIndex = Math.floor(v / (range / numImages));
  // Use the value of v in your code
  console.log("v = ", v, " index=", imageIndex);
  const filename = "images/cage"+imageIndex+".png";

  const headers = new Headers({
    "Content-Type": "image/png"
  });
  fetch(filename, { headers }).then(response => {
    if (response.ok) {
      response.blob().then(blob => {
        const url = URL.createObjectURL(blob);
        const img = document.createElement("img");
        img.src = url;
        document.body.appendChild(img);
      });
    } else {
      console.error("Failed to fetch image file:", response.status, response.statusText);
    }
  }).catch(error => {
    console.error("Failed to fetch image file:", error);
  });
  //document.write('<img height="500" src="'+filename+'">');
  </script>
</body>
</html>
